<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Store Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body class="dashboard">
    <div class="container">

        <!-- Left: Add Vegetable Section -->
        <section class="add-veg-section">
            <h2>Add New Vegetable</h2>

            {% if error %}
            <div class="alert error">{{ error }}</div>
            {% endif %}
            {% if success %}
            <div class="alert success">{{ success }}</div>
            {% endif %}

            <form class="veg-form" action="{{ url_for('store.add_vegetable') }}" method="POST" enctype="multipart/form-data">
                <label for="name">Vegetable Name:</label>
                <input type="text" id="name" name="name" required />

                <label for="stock">Initial Stock:</label>
                <input type="number" id="stock" name="stock" min="0" required />

                <label for="image">Image (optional):</label>
                <input type="file" id="image" name="image" accept="image/*" />

                <input type="submit" value="Add Vegetable" />
            </form>

            <a href="{{ url_for('store.logout') }}" class="logout-link">Logout</a>
        </section>

        <!-- Right: Vegetable Stock List -->
        <section class="stock-list-section">
            <h1>Welcome, {{ store.name }}</h1>
            <h2>Update Vegetable Stocks</h2>

            {% if vegetables %}
            <form method="POST" action="{{ url_for('store.store_dashboard') }}">
                <table class="stock-table">
                    <thead>
                        <tr>
                            <th>Vegetable</th>
                            <th>Current Stock</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for veg in vegetables %}
                        <tr>
                            <td>{{ veg.name.capitalize() }}</td>
                            <td>
                                <input type="number" name="stock_{{ veg.id }}" value="{{ veg.stock }}" min="0" />
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <button type="submit" class="update-btn">Update Stocks</button>
            </form>
            {% else %}
            <p>No vegetables found. Please add some from the left.</p>
            {% endif %}
        </section>
    </div>
</body>
</html>
